(function(e,t){var n,r=new t.maps.DirectionsRenderer,i=new t.maps.DirectionsService,s=t.maps.TravelMode.WALKING,o=new t.maps.LatLng(51.2192159,4.4028818),u,a,f=function(){u=e("#map_canvas");a=e("#map_error");n=new t.maps.Map(u.get(0),{center:o,zoom:9,mapTypeId:t.maps.MapTypeId.ROADMAP});r.setMap(n);r.setPanel(e("#directionsPanel").get(0));console.log("rest/trips/"+u.data("trip-id")+"/stops");e.getJSON("rest/trips/"+u.data("trip-id")+"/stops",l)},l=function(e){a.toggle(e.length<2);if(e.length<2)return!1;var n=e.shift(),o=e.pop(),u=[];for(var f in e)u.push({location:new t.maps.LatLng(e[f].latitude,e[f].longitude),stopover:!0});i.route({origin:new t.maps.LatLng(n.latitude,n.longitude),destination:new t.maps.LatLng(o.latitude,o.longitude),waypoints:u,travelMode:s},function(e,n){n===t.maps.DirectionsStatus.OK&&r.setDirections(e);console.log(n)})};e(f)})(window.jQuery,window.google);