// Load the SDK Asynchronously
function initFB(){FB.init({appId:"610255372322861",channelUrl:"http://localhost:8080/web/login/channel.html",status:!0,cookie:!0,xfbml:!0,frictionlessRequests:!0})}function checkLoginStatus(){FB.getLoginStatus(function(e){e.status=="connected"&&getData()})}function checkLoginStatusRequest(){FB.getLoginStatus(function(e){e.status=="connected"&&getDataRequest()})}function getData(){FB.api("/me?fields=id,first_name,last_name,birthday,email",function(e){$.post("rest/login/facebook",e,function(e){e=="true"&&(window.location="")})})}function getDataRequest(){FB.api("/me?fields=id,first_name,last_name,birthday,email",function(e){$.post("rest/login/facebook",e,function(e){e=="true"&&checkRequest()})})}function checkRequest(){var e=window.location.toString();if(e.contains("?")){var t="fbRequestIds="+e.split("?")[1].split("&")[0].split("=")[1];$.post("rest/request/register",t,function(e){e!="false"?window.location="trip/"+e:e=="false"&&alert("You already registered for this trip using this invite.")})}}function logout(){FB.getLoginStatus(function(e){e.status=="connected"&&FB.logout(function(e){})})}function sendRequestViaMultiFriendSelector(){var e=window.location.toString();FB.ui({method:"apprequests",message:"You can automaticly register for the trip by accepting this invitation. With acceptance you will be automaticly registered on the website (If you weren't already) and you will agree with our terms.",data:e,title:"Join me in this trip! It will be awesome! :D"},function(t){if(t.request&&t.to){var n=[];n.push(t.request);for(i=0;i<t.to.length;i++)n.push(t.to[i]);var r=n.join(","),s=e.split("/"),o="fbRequestIds="+r+"&tripId="+s[s.length-1];$.post("rest/request/handle",o,function(e){e=="true"&&alert("Requests have been handled, users can now register for the trip via facebook.")})}})}(function(e){var t,n="facebook-jssdk",r=e.getElementsByTagName("script")[0];if(e.getElementById(n))return;t=e.createElement("script");t.id=n;t.async=!0;t.src="//connect.facebook.net/en_US/all.js";r.parentNode.insertBefore(t,r)})(document);