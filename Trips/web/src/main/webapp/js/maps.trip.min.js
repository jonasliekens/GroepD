(function(e,t){var n,r=new t.maps.DirectionsRenderer,i=new t.maps.DirectionsService,s=t.maps.TravelMode.WALKING,o=new t.maps.LatLng(51.2192159,4.4028818),u,a=5e3,f,l,c=function(){f=e("#map_canvas");l=e("#map_error");n=new t.maps.Map(f.get(0),{center:o,zoom:9,mapTypeId:t.maps.MapTypeId.ROADMAP});r.setMap(n);r.setPanel(e("#directionsPanel").get(0));e.getJSON("rest/trips/"+f.data("trip-id")+"/stops",h);p();u=setInterval(p,a)},h=function(e){l.toggle(e.length<2);if(e.length<2)return!1;var n=e.shift(),o=e.pop(),u=[];for(var a in e)u.push({location:new t.maps.LatLng(e[a].latitude,e[a].longitude),stopover:!0});i.route({origin:new t.maps.LatLng(n.latitude,n.longitude),destination:new t.maps.LatLng(o.latitude,o.longitude),waypoints:u,travelMode:s},function(e,n){n===t.maps.DirectionsStatus.OK&&r.setDirections(e)})},p=function(){e.getJSON("rest/trips/participants/started",{tripId:f.data("trip-id")},d)},d=function(e){console.log(e)};e(c)})(window.jQuery,window.google);